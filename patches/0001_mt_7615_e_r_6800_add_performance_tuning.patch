*** Begin Patch
*** Add File: drivers/net/wireless/mediatek/mt76/mt7615/mt7615_tuning.c
+// SPDX-License-Identifier: GPL-2.0
+/*
+ * mt7615 tuning knobs (R6800 optimizations - runtime knobs)
+ *
+ * This small compilation unit exposes a set of module parameters that
+ * let you experiment with a few driver-level tuning knobs at runtime
+ * via /sys/module/mt7615e/parameters/. The idea is to make iterative
+ * performance experiments (ring sizes, aggregation) without re-building
+ * the whole driver for each change.
+ *
+ * NOTE: This file only exposes knobs. The next step is to wire these
+ * values into the places in init.c / eeprom.c that allocate rings,
+ * set HW aggregation, etc. I did not change allocation logic directly
+ * to avoid touching many driver internals in a best-effort patch.
+ */
+
+#include <linux/module.h>
+#include <linux/kernel.h>
+
+static int tx_ring_size = 1024;
+module_param(tx_ring_size, int, 0444);
+MODULE_PARM_DESC(tx_ring_size, "Requested TX ring size for experimentation (override default)");
+
+static int rx_ring_size = 1024;
+module_param(rx_ring_size, int, 0444);
+MODULE_PARM_DESC(rx_ring_size, "Requested RX ring size for experimentation (override default)");
+
+static int enable_amsdu = 1;
+module_param(enable_amsdu, int, 0444);
+MODULE_PARM_DESC(enable_amsdu, "Enable A-MSDU aggregation where supported (1 = on, 0 = off)");
+
+static int enable_amsdu_in_agg = 1;
+module_param(enable_amsdu_in_agg, int, 0444);
+MODULE_PARM_DESC(enable_amsdu_in_agg, "Allow A-MSDU inside aggregated MPDUs where driver/firmware supports it");
+
+static int napi_weight = 64;
+module_param(napi_weight, int, 0444);
+MODULE_PARM_DESC(napi_weight, "NAPI weight to request from netdev (if driver honors it)");
+
+static int tx_queue_len = 1000;
+module_param(tx_queue_len, int, 0444);
+MODULE_PARM_DESC(tx_queue_len, "netdev tx_queue_len (if driver applies it during dev setup)");
+
+static int debug_tuning = 0;
+module_param(debug_tuning, int, 0444);
+MODULE_PARM_DESC(debug_tuning, "Enable debug prints for tuning (0/1)");
+
+static int __init mt7615_tuning_init(void)
+{
+    pr_info("mt7615_tuning: loaded - tx_ring=%d rx_ring=%d amsdu=%d amsdu_in_agg=%d napi_weight=%d tx_q_len=%d\n",
+            tx_ring_size, rx_ring_size, enable_amsdu, enable_amsdu_in_agg,
+            napi_weight, tx_queue_len);
+
+    if (debug_tuning)
+        pr_info("mt7615_tuning: debug enabled\n");
+
+    /*
+     * This module file purposefully does not reach into other compilation
+     * units to modify allocation. Instead it exposes knobs that can be
+     * read from other driver files (init.c, eeprom.c) if you choose to
+     * wire them in. Example usage in driver code:
+     *
+     * extern int tx_ring_size; // declared in mt7615_tuning.c
+     * use tx_ring_size when allocating descriptor ring
+     *
+     */
+
+    return 0;
+}
+
+static void __exit mt7615_tuning_exit(void)
+{
+    pr_info("mt7615_tuning: unloaded\n");
+}
+
+module_init(mt7615_tuning_init);
+module_exit(mt7615_tuning_exit);
+
+MODULE_AUTHOR("Patch by ChatGPT (skeleton tuning knobs)");
+MODULE_DESCRIPTION("mt7615e runtime tuning knobs for experimentation (R6800)");
+MODULE_LICENSE("GPL");
+
*** End Patch
*** Begin Patch
*** Update File: drivers/net/wireless/mediatek/mt76/mt7615/Makefile
@@
-obj-$(CONFIG_MT7615) += mt7615.o
+obj-$(CONFIG_MT7615) += mt7615.o mt7615_tuning.o
*** End Patch
