From: CI Patch <ci@example.com>
Subject: [PATCH] mt7615: add runtime option to disable precal and clear EEPROM flags

--- a/package/kernel/mt76/mt7615/eeprom.c
+++ b/package/kernel/mt76/mt7615/eeprom.c
@@ -8,6 +8,12 @@
 #include <linux/of.h>
 #include "mt7615.h"
 #include "eeprom.h"
+#include <linux/moduleparam.h>
+
+static bool mt7615_disable_precal = true;
+module_param(mt7615_disable_precal, bool, 0444);
+MODULE_PARM_DESC(mt7615_disable_precal, "Disable use of pre-calibration data from EEPROM/flash for mt7615");
 
 static int mt7615_efuse_read(struct mt7615_dev *dev, u32 base,
 			     u16 addr, u8 *data)
@@
 	if (ret && dev->mt76.otp.data) {
 		memcpy(dev->mt76.eeprom.data, dev->mt76.otp.data,
 		       dev->mt76.otp.size);
 	} else {
 		dev->flash_eeprom = true;
 		mt7615_cal_free_data(dev);
+
+		/* If requested, clear historical precal indicator bytes so the
+		 * driver uses online/runtime calibration instead of precal
+		 * data from flash/eeprom. Guarded by symbol and parameter.
+		 */
+		if (mt7615_disable_precal) {
+#ifdef MT_EE_CALDATA_FLASH
+			if (dev && dev->mt76.eeprom.data) {
+				u8 *ee = (u8 *)dev->mt76.eeprom.data;
+				ee[MT_EE_CALDATA_FLASH] &= ~GENMASK(4, 0);
+				dev_info(dev->mt76.dev, "mt7615: cleared precal indicator (runtime calib enforced)\n");
+			}
+#else
+			/* MT_EE_CALDATA_FLASH not defined in this mt76 revision; skipping. */
+#endif
+		}
 	}
 
 	mt7615_eeprom_parse_hw_cap(dev);
